<app-no-results *ngIf="hasNoResults()"></app-no-results>

<div class="govuk-body" *ngIf="hasResults()">

    <!-- Go back to the address results. -->
    <button type="button" class="link-button" (click)="goBack()" *ngIf="showBackButton">
        Back to address results
    </button>

    <h2 class="govuk-heading-m">Results</h2>

    <app-warning>
        DPA: Callers have to answer two DPA questions to access account information.
    </app-warning>

    <!-- If we've found contact information... -->
    <h2 class="govuk-heading-m">Tenancy details</h2>

    <!-- Display the address of the property. -->
    <app-panel boxStyle="true" class="govuk-!-margin-bottom-3">
        <h2 class="govuk-heading-s govuk-!-margin-bottom-2">ADDRESS</h2>
        <p class="govuk-body" [innerHtml]="getAddress()"></p>

        <h2 class="govuk-heading-s govuk-!-margin-bottom-2">Data Protection Act questions</h2>
        <app-dpa-tenancy [crmContactID]="crm_contact_id"></app-dpa-tenancy>
    </app-panel>

    <!-- Display each tenant. -->
    <h2 class="govuk-heading-m">Tenant details</h2>

    <app-panel boxStyle="true" class="tenant-list govuk-!-margin-bottom-3">
        <div class="govuk-radios govuk-radios--inline">
            <div class="govuk-radios__item" *ngFor="let row of tenants; let i = index; trackBy: trackByMethod">
                <input class="govuk-radios__input" id="changed-name-{{i}}" name="changed-name" type="radio" [(ngModel)]="_selected" [value]="row">
                <label class="govuk-label govuk-radios__label govuk-grid-row" for="changed-name-{{i}}">
                    <!--
                    NOTE: inline tags (such as LABEL) CAN contain block level elements,
                          as long as the inline element isn't within another inline element.
                          They should also be styled with display: block.
                    https://stackoverflow.com/questions/6061869/are-block-level-elements-allowed-inside-inline-level-elements-in-html5
                    -->

                    <!-- The contact's name. -->
                    <span class="govuk-grid-column-full govuk-!-margin-bottom-5">
                        <span class="govuk-heading-m govuk-!-margin-bottom-1">{{ row.getName() }}</span>
                        <!--<p class="govuk-body-s govuk-!-margin-bottom-0">
                            <b>Ms J Bell</b> &ndash; <span>Advocate/Secondary contact</span>
                        </p>-->
                    </span>

                    <!-- Contact details. -->
                    <span class="govuk-grid-column-one-half">
                        <span class="govuk-heading-s govuk-!-margin-bottom-2">CONTACT DETAILS</span>

                        <app-value-list class="govuk-body-s">
                            <app-value-list-label>Telephone</app-value-list-label>
                            <app-value-list-value>
                                <div *ngFor="let number of row.getTelephoneNumbers(); trackBy: trackByMethod">
                                    {{ number }}
                                </div>
                                <em *ngIf="row.hasNoTelephoneNumbers()">none</em>
                            </app-value-list-value>

                            <app-value-list-label>Email</app-value-list-label>
                            <app-value-list-value>
                                <div *ngFor="let email of row.getEmailAddresses(); trackBy: trackByMethod">
                                    {{ email }}
                                </div>
                                <em *ngIf="row.hasNoEmailAddresses()">none</em>
                            </app-value-list-value>
                        </app-value-list>
                    </span>

                    <!-- DPA. -->
                    <span class="govuk-grid-column-one-half">
                        <span class="govuk-heading-s govuk-!-margin-bottom-2">DPA</span>
                        <app-value-list class="govuk-body-s">
                            <app-value-list-label>NI number</app-value-list-label>
                            <app-value-list-value>AB 12 34 56 C</app-value-list-value>

                            <app-value-list-label>Date of birth</app-value-list-label>
                            <app-value-list-value>{{ row.getDateOfBirth() }}</app-value-list-value>
                        </app-value-list>
                    </span>
                </label>

                <button class="link-button govuk-!-margin-bottom-3" type="button" name="button" (click)="editContactDetails(row)">
                    Edit tenant details
                </button>
            </div>
        </div>

    </app-panel>

    <!-- Select this information. -->
    <button class="govuk-button govuk-!-margin-bottom-0" [disabled]="!hasSelection()" (click)="confirmSelection()">
        Continue
    </button>

</div>
