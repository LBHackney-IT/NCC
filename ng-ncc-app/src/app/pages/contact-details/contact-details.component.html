<div class="govuk-grid-row">
    <form #formContactDetails="ngForm" class="govuk-grid-column-two-thirds" (ngSubmit)="saveDetails()">
        <!-- #formContactDetails="ngForm" -->
        <!-- This creates a local template variable called formContactDetails, which is bound to ngForm. -->
        <!-- We can now use formContactDetails.valid and other methods to check the validation status of the form. -->
        <!-- Similarly we can use #name="ngModel" on input fields to bind the model of an input field to a local variable. -->

        <h1 class="govuk-heading-l">Edit tenant details</h1>

        <!-- Title. -->
        <div class="govuk-grid-row">
            <label class="govuk-grid-column-one-third govuk-body govuk-!-font-weight-bold" for="title">
                Title
            </label>
            <div class="govuk-grid-column-two-thirds govuk-body" id="title">
                {{ details.original.title }}
            </div>
        </div>

        <!-- First name. -->
        <div class="govuk-grid-row">
            <label class="govuk-grid-column-one-third govuk-body govuk-!-font-weight-bold" for="first-name">
                First name
            </label>
            <div class="govuk-grid-column-two-thirds govuk-body" id="first-name">
                {{ details.original.firstName }}
            </div>
        </div>

        <!-- Last name. -->
        <div class="govuk-grid-row">
            <label class="govuk-grid-column-one-third govuk-body govuk-!-font-weight-bold" for="last-name">
                Last name
            </label>
            <div class="govuk-grid-column-two-thirds govuk-body" id="last-name">
                {{ details.original.lastName }}
            </div>
        </div>

        <!-- Home number(s). -->
        <div class="govuk-form-group">
            <fieldset class="govuk-fieldset">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                    <div class="add-new govuk-!-padding-left-0 govuk-!-padding-right-0">
                        <h2 class="govuk-fieldset__heading add-new__title">
                            Home number
                        </h2>
                        <button class="add-new__button" type="button" name="button" *ngIf="!hasEnoughTelephoneNumbers()" (click)="addTelephoneNumber()">+ Add new</button>
                    </div>
                </legend>
                <div class="govuk-radios">

                    <!-- Existing home numbers. -->
                    <div class="govuk-radios__item" *ngFor="let row of details.update.telephone; let i = index; trackBy: trackByIndex">
                        <input class="govuk-radios__input" id="existing-telephone-{{ i }}" name="telephone-default" type="radio"
                            [(ngModel)]="details.update.default.telephone" [value]="details.update.telephone[i]">
                        <label class="govuk-label govuk-radios__label" for="existing-telephone-{{ i }}">
                            {{ row }}
                        </label>
                    </div>

                    <!-- New home number(s). -->
                    <div class="govuk-radios__item govuk-!-width-one-half" *ngFor="let row of new_telephone; let i = index; trackBy: trackByIndex;">
                        <!-- See the component for trackByIndex(). -->

                        <!-- radio button... -->
                        <input class="govuk-radios__input" id="new-telephone-{{ i }}" name="telephone-default" type="radio"
                        [(ngModel)]="details.update.default.telephone" [value]="row">
                        <label class="govuk-label govuk-radios__label radio-text-field" for="new-telephone-{{ i }}"></label>

                        <!-- text field... -->
                        <div class="govuk-form-group govuk-!-margin-left-3">
                            <label class="govuk-label govuk-visually-hidden" for="new-telephone-{{ i }}-value">New telephone number {{ i + 1 }}</label>
                            <input class="govuk-input" type="text" id="new-telephone-{{ i }}-value" name="new_telephone_{{ i }}" required
                            [(ngModel)]="new_telephone[i]"
                            (focus)="details.update.default.telephone = row;"
                            (blur)="details.update.default.telephone = row;"
                            [disabled]="_saving">
                        </div>

                    </div>

                </div>
            </fieldset>
        </div>

        <!-- Mobile number(s). -->
        <div class="govuk-form-group">
            <fieldset class="govuk-fieldset">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                    <div class="add-new govuk-!-padding-left-0 govuk-!-padding-right-0">
                        <h2 class="govuk-fieldset__heading add-new__title">
                            Mobile number
                        </h2>
                        <button class="add-new__button" type="button" name="button" *ngIf="!hasEnoughMobileNumbers()" (click)="addMobileNumber()">+ Add new</button>
                    </div>
                </legend>
                <div class="govuk-radios">

                    <!-- Existing mobile numbers. -->
                    <div class="govuk-radios__item" *ngFor="let row of details.update.mobile; let i = index; trackBy: trackByIndex">
                        <input class="govuk-radios__input" id="existing-mobile-{{ i }}" name="mobile-default" type="radio"
                            [(ngModel)]="details.update.default.mobile" [value]="details.update.mobile[i]">
                        <label class="govuk-label govuk-radios__label" for="existing-mobile-{{ i }}">
                            {{ row }}
                        </label>
                    </div>

                    <!-- New mobile number(s). -->
                    <div class="govuk-radios__item govuk-!-width-one-half" *ngFor="let row of new_mobile; let i = index; trackBy: trackByIndex;">

                        <!-- radio button... -->
                        <input class="govuk-radios__input" id="new-mobile-{{ i }}" name="mobile-default" type="radio"
                        [(ngModel)]="details.update.default.mobile" [value]="row">
                        <label class="govuk-label govuk-radios__label radio-text-field" for="new-mobile-{{ i }}"></label>

                        <!-- text field... -->
                        <div class="govuk-form-group govuk-!-margin-left-3">
                            <label class="govuk-label govuk-visually-hidden" for="new-mobile-{{ i }}-value">New mobile number {{ i + 1 }}</label>
                            <input class="govuk-input" type="text" id="new-mobile-{{ i }}-value" name="new_mobile_{{ i }}" required
                                [(ngModel)]="new_mobile[i]" (focus)="details.update.default.mobile = row;"
                                (blur)="details.update.default.mobile = row;"
                                [disabled]="_saving">
                        </div>

                    </div>

                </div>
            </fieldset>
        </div>

        <!-- Email address(es). -->
        <div class="govuk-form-group">
            <fieldset class="govuk-fieldset">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                    <div class="add-new govuk-!-padding-left-0 govuk-!-padding-right-0">
                        <h2 class="govuk-fieldset__heading add-new__title">
                            Email
                        </h2>
                        <button class="add-new__button" type="button" name="button" *ngIf="!hasEnoughEmailAddresses()"
                            (click)="addEmailAddress()">+ Add new</button>
                    </div>
                </legend>
                <div class="govuk-radios">

                    <!-- Existing email addresses. -->
                    <div class="govuk-radios__item" *ngFor="let row of details.update.email; let i = index; trackBy: trackByIndex">
                        <input class="govuk-radios__input" id="existing-email-{{ i }}" name="email-default" type="radio"
                            [(ngModel)]="details.update.default.email" [value]="details.update.email[i]">
                        <label class="govuk-label govuk-radios__label" for="existing-email-{{ i }}">
                            {{ row }}
                        </label>
                    </div>

                    <!-- New email address(es). -->
                    <div class="govuk-radios__item govuk-!-width-one-half" *ngFor="let row of new_email; let i = index; trackBy: trackByIndex;">

                        <!-- radio button... -->
                        <input class="govuk-radios__input" id="new-email-{{ i }}" name="email-default" type="radio"
                        [(ngModel)]="details.update.default.email" [value]="row">
                        <label class="govuk-label govuk-radios__label radio-text-field" for="new-email-{{ i }}"></label>

                        <!-- text field... -->
                        <!-- This uses Angular's email validator. -->
                        <div class="govuk-form-group govuk-!-margin-left-3">
                            <label class="govuk-label govuk-visually-hidden" for="new-email-{{ i }}-value">New email {{ i + 1 }}</label>
                            <input class="govuk-input" type="email" id="new-email-{{ i }}-value" name="new_email_{{ i }}" email required
                                [(ngModel)]="new_email[i]" (focus)="details.update.default.email = row;"
                                (blur)="details.update.default.email = row;"
                                [disabled]="_saving">
                        </div>

                    </div>

                </div>
            </fieldset>
        </div>

        <!-- The submit button. -->
        <!-- It should be disabled if we have any empty fields or an invalid email address. -->
        <button class="govuk-button" type="submit" name="button" [disabled]="!formContactDetails.valid || _saving">
            Save
        </button>

    </form>
</div>
